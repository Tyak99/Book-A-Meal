{"version":3,"sources":["../../controllers/meal.js"],"names":["Meal","Model","exports","create","req","res","body","name","price","send","status","error","catererId","caterer","then","meal","data","catch","err","list","findAll","where","params","id","editMeal","findById","update","delete","destroy"],"mappings":"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","sourcesContent":["import Model from '../models';\n\nconst { Meal } = Model;\n\nexports.create = (req, res) => {\n  if (!req.body.name || !req.body.price) {\n    return res.send({\n      status: 400,\n      error: 'Meal needs to have name and price',\n    });\n  }\n  Meal.create({\n    name: req.body.name,\n    price: req.body.price,\n    catererId: req.body.caterer,\n  })\n    .then(meal => res.send({\n      status: 201,\n      data: meal,\n    }))\n    .catch(err => res.send(err));\n};\n\nexports.list = (req, res) => {\n  Meal.findAll({\n    where: {\n      catererId: req.params.id,\n    },\n  })\n    .then(meal => res.send({\n      status: 200,\n      data: meal,\n    }))\n    .catch(err => res.send(err));\n};\n\nexports.editMeal = (req, res) => {\n  Meal.findById(req.params.id).then((meal) => {\n    if (!meal) {\n      return res.send({\n        status: 400,\n        error: 'No meal found',\n      });\n    }\n    return meal\n      .update({\n        price: req.body.price || meal.price,\n        name: req.body.name || meal.name,\n      })\n      .then(() => res.send({\n        status: 200,\n        data: meal,\n      }))\n      .catch(error => res.send(error));\n  });\n};\n\nexports.delete = (req, res) => {\n  Meal.findById(req.params.id).then((meal) => {\n    if (!meal) {\n      return res.send({\n        status: 400,\n        error: 'No meal found',\n      });\n    }\n    return meal\n      .destroy()\n      .then(() => res.send({\n        status: 204,\n        data: 'Meal deleted successfully',\n      }))\n      .catch(error => res.send({\n        status: 400,\n        error,\n      }));\n  });\n};\n"],"file":"meal.js"}